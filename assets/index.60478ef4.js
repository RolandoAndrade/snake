const v=function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))n(s);new MutationObserver(s=>{for(const r of s)if(r.type==="childList")for(const c of r.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&n(c)}).observe(document,{childList:!0,subtree:!0});function e(s){const r={};return s.integrity&&(r.integrity=s.integrity),s.referrerpolicy&&(r.referrerPolicy=s.referrerpolicy),s.crossorigin==="use-credentials"?r.credentials="include":s.crossorigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function n(s){if(s.ep)return;s.ep=!0;const r=e(s);fetch(s.href,r)}};v();class f{constructor(t,e,n,s,r,c=void 0,d=void 0){this.x=t,this.y=e,this.width=n,this.height=s,this.color=r,this.borderColor=c,this.lineWidth=d,this.color=r,this.borderColor=c||r,this.lineWidth=d||0}draw(t){t.fillStyle=this.color,t.fillRect(this.x,this.y,this.width,this.height),t.lineWidth=this.lineWidth,t.strokeStyle=this.borderColor,t.stroke(),t.closePath()}move(t,e){this.x=t,this.y=e}}class E extends f{constructor(t,e,n,s){super(t,e,o.SQUARE_WIDTH,o.SQUARE_WIDTH,o.SNAKE_COLOR);this.velocityX=n,this.velocityY=s}getPositionAndVelocity(){return{x:this.x,y:this.y,velocityX:this.velocityX,velocityY:this.velocityY}}forward(t=void 0){t?(super.move(t.x,t.y),this.velocityX=t.x,this.velocityY=t.y):super.move(this.x+this.velocityX,this.y+this.velocityY)}up(){this.velocityY===0&&(this.velocityX=0,this.velocityY=-o.SNAKE_VELOCITY)}down(){this.velocityY===0&&(this.velocityX=0,this.velocityY=o.SNAKE_VELOCITY)}left(){this.velocityX===0&&(this.velocityX=-o.SNAKE_VELOCITY,this.velocityY=0)}right(){this.velocityX===0&&(this.velocityX=o.SNAKE_VELOCITY,this.velocityY=0)}collision(t){return this.x===t.x&&this.y===t.y}draw(t){t.fillStyle=this.color,t.fillRect(this.x*o.SQUARE_WIDTH,this.y*o.SQUARE_WIDTH,this.width,this.height)}}class g{constructor(){this.snake=[],this.isAlive=!0;for(let t=0;t<4;t++)this.snake.push(new E(6,6,o.SNAKE_VELOCITY,0));l.keyPressed(h.LEFT,this.head.left.bind(this.head)),l.keyPressed(h.RIGHT,this.head.right.bind(this.head)),l.keyPressed(h.UP,this.head.up.bind(this.head)),l.keyPressed(h.DOWN,this.head.down.bind(this.head))}move(){let t;for(const e of this.snake){const n=e.getPositionAndVelocity();e.forward(t),t=n,this.checkCollision(e)}this.killOutside()}draw(t){for(const e of this.snake)e.draw(t)}killOutside(){(this.head.x<0||this.head.x>=o.CELLS_WIDTH||this.head.y<0||this.head.y>=o.CELLS_HEIGHT)&&this.kill()}kill(){this.isAlive=!1}checkCollision(t){t!=this.head&&this.head.collision(t)&&this.kill()}growUp(){const t=this.tail.getPositionAndVelocity();this.snake.push(new E(t.x,t.y,t.velocityX,t.velocityY))}get head(){return this.snake[0]}get tail(){return this.snake[this.snake.length-1]}get alive(){return this.isAlive}get body(){return this.snake}}function k(i){for(let t=i.length-1;t>0;t--){const e=Math.floor(Math.random()*(t+1));[i[t],i[e]]=[i[e],i[t]]}return i}class w extends f{constructor(t){super(0,0,o.SQUARE_WIDTH,o.SQUARE_WIDTH,o.FOOD_COLOR);this.snake=t,this.generate()}generate(){let t=o.GRID;for(const e of this.snake.body)t=t.filter(n=>n.x!=e.x||n.y!=e.y);if(t.length){const e=k(t)[0];this.x=e.x,this.y=e.y}}wasEaten(){return this.snake.body[0].collision(this)?(this.snake.growUp(),this.generate(),!0):!1}draw(t){t.fillStyle=this.color,t.fillRect(this.x*o.SQUARE_WIDTH,this.y*o.SQUARE_WIDTH,this.width,this.height)}}class A{constructor(){this.score=0}draw(t){t.textAlign="center",t.font="250px Arial, sans-serif",t.fillStyle="#A3A3A3",t.fillText(""+this.score,200,270),t.font="15px Arial, sans-serif",t.fillText("Rolando Andrade",200,320)}add(){this.score++}}var h;(function(i){i.UP="up",i.DOWN="down",i.LEFT="left",i.RIGHT="right",i.ENTER="enter"})(h||(h={}));document.addEventListener("keydown",i=>{l.emit(i.key)});const a=class{static keyPressed(i,t){this.listeners[i].push(t)}static emit(i){for(const t in a.keyMap)if(a.keyMap[t].some(e=>e==i))for(const e of a.listeners[t])e()}};let l=a;l.keyMap={[h.UP]:["ArrowUp","w","W"],[h.DOWN]:["ArrowDown","s","S"],[h.LEFT]:["ArrowLeft","a","A"],[h.RIGHT]:["ArrowRight","d","D"],[h.ENTER]:[" ","Enter"]};l.listeners={[h.UP]:[],[h.DOWN]:[],[h.LEFT]:[],[h.RIGHT]:[],[h.ENTER]:[]};class T{constructor(t){this.ctx=t,this.gameOver=!0,this.background=new f(0,0,400,400,"#424242"),l.keyPressed(h.ENTER,()=>{this.gameOver&&this.init()})}init(){this.snake=new g,this.food=new w(this.snake),this.score=new A,this.gameOver=!1}loop(){this.background.draw(this.ctx),this.gameOver?(this.ctx.textAlign="center",this.ctx.font="50px Arial, sans-serif",this.ctx.fillStyle="#fff13d",this.ctx.fillText("GAME OVER",200,200),this.ctx.font="15px Arial, sans-serif",this.ctx.fillText("Press ENTER to start",200,250)):(this.snake.move(),this.food.wasEaten()&&this.score.add(),this.score.draw(this.ctx),this.snake.draw(this.ctx),this.food.draw(this.ctx),this.gameOver=!this.snake.alive)}}const y=20,u=20;function O(){const i=[];for(let t=0;t<u;t++)for(let e=0;e<y;e++)i.push({x:e,y:t});return i}const o={SQUARE_WIDTH:20,BOARD_WIDTH:20*y,BOARD_HEIGHT:20*u,SNAKE_COLOR:"#71ebff",SNAKE_VELOCITY:1,FOOD_COLOR:"#ff406e",CELLS_WIDTH:y,CELLS_HEIGHT:u,GRID:O()},p=document.getElementById("canvas"),x=p.getContext("2d"),m=new T(x);function R(){m.loop()}window.setInterval(R,100);
